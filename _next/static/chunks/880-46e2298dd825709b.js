(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[880],{5880:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Z}});var r=n(5893),a=n(9008),i=n(1163),o=n(6158),s=n.n(o),u=n(4184),c=n.n(u),l=n(9612),d=n(7294),m=n(4051),p=n.n(m);function f(e,t,n,r,a,i,o){try{var s=e[i](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,a)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){f(i,r,a,o,s,"next",e)}function s(e){f(i,r,a,o,s,"throw",e)}o(void 0)}))}}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){v(e,t,n[t])}))}return e}var b=[{id:"101dalmations",name:"101 Dalmation Charity Project",tags:["history","culture"],imageUrls:["https://placekitten.com/200/300","https://placekitten.com/300/200"],projectLeadId:"cruella",contents:"# Has sunt tuta frontem carmen reus somnos\n\n## Nec sic pavidum liquit\n\nLorem markdownum fortunaque vaga: nec, materno permansit futurum versat. Carina\ndum reluxit inter summam detestatur undis, Gryneus, telum vobis ille lacrimis?\nTam filis in nequiquam, molle quies, furialibus bracchia et Circes corpore\nrictus repugnat, torrentis pisce si.\n\n1. Muneris tremescere Stygia sitim dixisse\n2. O adhuc deus auxerunt\n3. Non si attollere circuit campis\n\nNihil sive tendens iuvenem: nos nox mutatum non currere non sidere negaretur\nversato: ubi ducis. Mors corna, quo latus, greges sollicitat, acie desuetas\nfurit; suo Dryope nollet facientibus criminis Iove! Situ numina glomerataque\nhuic fugiant sceptri: relinquam neque, foramine senecta?\n\n## Tamen nec parva rogant pallentia toto sed\n\nPostquam nudans tulisti nymphas effugit et Antiphataeque rapidi senem posuisset\ncauda, iam. Possit tantoque cepit tantum facti nubibus vocet *venientis* non\nest; fiducia, fatebere sequentis essem annorum pulveris contingere. Quae fulgore\nduo aut iuncta natumque Iuppiter **silvas** tophis si matrum et audenti lacus\npraemia fauces et vides [crescentesque quod](http://colores.io/praedae).\n\n    var copy = gibibyte_windows;\n    var mysql_unmount_lag = www.disk(4 + copyrightOutput + flatbed,\n            interfaceControllerDos(5, dacServer(1), drive));\n    var key = 29;\n\n## Nullum ubi media pater hamato ardua nota\n\nUltima meritam, stetit in suam falsa aureus corpore, Rutulos. Quod sit serpentis\nepulas quis posuit terga Stygio gravem. Ferre habet perdet, honore, qui speciem\nsequendo cum. Omnesque illa Doridaque tacet ab genitor, suas meae ex quis sic\ncapillis pigre temerare.\n\n1. Parente vita quoque facit nata carinas dolosae\n2. Procis in ore sedit\n3. Mea terras agresti tamen respiceret fornace est\n\nFluvios accipit, clausa, et latebra iunget; victus motu, Thracum coepta\nqueruntur nec fervoribus. *Poterat qua partus*, moenia conatibus lintea.\n*Durescit* sic subnixa tamen *saxum*, et capillos cerebrum ferarum **o** mundi,\ncum Hypaepis devenit oraque.\n\nMaturus resolvo tamen. Rata non nam suo inpositum dederant illa pavidamque\nquaerit venenis erat moenia in demisere. Fixit Metione **magno** edendi gaudete\nbos dapes erit accepit, ut memorant locique saeva. Angues Nereusque terras\nmeroque Iuno. Praesens **quid** alias Thoactes, flavus Phoebeius distat, quae\nsidus exierint lacertis."},{id:"ismywaterdirty",name:"Is my Water Dirty?",tags:["technology"],imageUrls:["https://placekitten.com/200/350","https://placekitten.com/350/200","https://placekitten.com/250/250"],projectLeadId:"waterboy",forkedFromProjectId:"101dalmations",contents:"# Manus mei ut\n\n## Summa magnum qualis\n\nLorem markdownum Iason; potenti lucus tenentis, turis inminet audet. Pedum puer\npendet figuras quae, est est ingens sensim; sed et villo maiora movet rubefecit.\nFaece promisistis mirabile victor, pro atque digitis gestumque terrenae:\ngemitum. Ebur nostro ore frondes talibus cunctaque germane; laesa cum ventrem\nRhodosque! Viscera cornigeris Musa ferunt, misit mandata mercede\n[venit](http://www.hac.com/nobis.aspx) populo, tibi sacra modum supplex.\n\n    if (3) {\n        megapixel /= transfer_voip_transistor - version + 5;\n        tagStreaming = vlb;\n    }\n    tebibyte_core_cable = software * adf_spreadsheet + processMenu - memory;\n    driverDll(it_iteration_snmp - cut(configurationMatrixArray,\n            resources_autoresponder, tunneling_wysiwyg_screenshot),\n            bash_home_imap + definitionCtrMysql.sdBrouterApple(-2,\n            myspaceRowIsp, -4));\n    if (dvi_internet_up(5, andGatewayReality, fileQuicktimeOpen) != 2) {\n        vector = bashPage + token;\n        ssid.computer_opengl_point.bankruptcy_skyscraper(registry, digital);\n        manet = virus_mips_encoding;\n    } else {\n        errorExternalDbms(driverSafe, prebinding);\n        circuit.passwordJspError = 5;\n    }\n\n## Per navigiis\n\nIugeribus se laboris pallent vixque nymphas Cecropio adest mora bicorni; in\ntinxit: mihi frater pavido perque colloque. Lapsis Hypaepis pressum valebam\nmiratur, spatium in falsa gerens, sors cuncta quod! Ante morte, quid Iove opem\n**iurare** ab regia hic sit, requies. Hoc vocem muneris Romule motu sibi, vincta\nab non in donec conubia contraxit, serpens Emathiique; bucina et? Pontum quoque,\nvirentes famulis prisca coniugis ait amplexus quae, non per, per.\n\n- Ab non cremet sum bracchia virum\n- Iussis aestibus et taxo levati expertus medias\n- Lyncus tempore magnis\n- Praestantior nec reperta colore\n- Vis una traiecti regia\n- Boves et\n\n## Effecere rauca ignisque suorum meminitque pavet leto\n\nPiasque humus patrium flammam electra vestrum, sollicita tum [dictis voto\nnodosque](http://www.moticamini.org/) placet. Indice *factorum* versuta sic: iam\ndeae volentes fertilis sacrataque.\n\n## Iram mediumque carens fidissime dracones perdidit\n\nMonebat cum pone sub Trachine [conspicit\ndicta](http://altoaeoliique.io/domossummas.php) et obortis lentus, pennis\naccipitrem quinque prendique regina ferus caput. Et confido pharetrae laudando\ntimidissime ab poma novissima abiit conrepta quae de ignis. Inmeritam Scorpion.\n\n> **Enim sonat** veniensque, vel cladibus regnumque et Agenore ipsa mihi inque\n> ambobus tumidisque, quem viri excipit. Ex **nollem flammis** et numina\n> [inmotus victoris](http://pars.org/) vocatur *stetit*. Nebulas tum in hunc\n> *cui* tenore omne nobilitate praemia costumque petiere gentisque **cepit\n> aquarum**.\n\n**Orbis quibus** nec quo iuxta ut Minyeides [nova\nvipereos](http://www.et-lacrimas.com/quique.html), Ausonio Proca ut velox!\nLitora Periphanta Cyane non dabat plumbum ignotae, Aurorae et potens, sed virago\nillas."},{id:"bugburgers",name:"Bringing Bug Burgers to Mass Production",tags:["technology","pollution"],projectLeadId:"mcdonerds",imageUrls:["https://placekitten.com/200/350","https://placekitten.com/350/200","https://placekitten.com/250/250"],contents:"# Functaque exitium numina rursusque licet et optat\n\n## Acasto Hectoris si terras factae in casu\n\nLorem markdownum inania Iuppiter sustinet stimuletur levi: credas *me comas*,\nPergama, ingemuit, non. Mulces in percussit captare rapta illis, resistunt tunc.\nIlle flores gratantur iuvenum, quae, sequitur Amphrysos concilio te erit,\nflatuque quia.\n\n1. Uvis casus sumpsisse luctus canis nec novus\n2. Animam recenti vicinia\n3. Guttura coruscis\n4. Iam sua obruta sordidus inhaesi\n5. Quod qua pompae haec quamvis delphina formae\n6. Vellem opifer barbarus turbavere\n\n## Potiunda tamen occupat caelo\n\n*Nata ecce* vadit nostrum Calydon fugaverat tremebunda quae. Nota monte\n[pia](http://ut.io/numen-tergoque) vero maesto, veteris una trans ossibus?\nInduit se aberat ter alter meminisse ad exhalat [quibus\nmatrum](http://perfectaque-modo.com/) nec petiisse amore? Nox mea dicere mundo\netiam erit dedisses demisso aequora!\n\n## Hectoris lactis recessit Hyries aequoris lunaria a\n\nSub Acasto quoque moritura, effugit, genitis a honore cetera? In *similes vocem\nhac*, Cebrenida pascua scrobibus vel arbore, Ante. Se quoque habebis fecit:\ncredens viribus currusque retinens: intrare gentis obliqua longius, timidis.\nSuas puppe exclamat; quid aras Hectora ignis fixa **cernit anguem**.\n\n## Silva duabus simul\n\nDesierant Peleu, Oebalio et oracula hoc avertitur adhuc Cephesidas. Suco dixit\nalipedis haec. Levabere petit, non increvit guttur maturus Peleus.\n\n> Pro ille sororia. Usque socio Cupido ut citharae sanguine. Ausonia firmatque\n> quam ante obruta a omnia cum culpae mores visa? Ipso iaculum bipenni sceleri\n> ususabstrahit pretium Psamathen qua illic, ore. Aberat consumpserat optat ne\n> unum, at Agenore resolvit luridus Tereus sceleratior ducere sequerer et radere\n> digitosque rarus vitiis.\n\n## Rubent potum et leto\n\nNescia amicitiae, amens satis fretum, neganda thalamos est terra praestate.\nHortatibus et non et inpubibus mixtus inter, uvis tectum illas procumbere ausa\nfrugum refers. Cum cum puer, sunt tauro, quoque hanc remigis moderantum illi\ncandida [medium](http://materiaque-doloris.com/flamina) avidos. Iussit contigit\nore pepercit posita deam aequore figentem pater, habet memoraverit fidae.\n\nCum imis videns talia vocem spatium, qui qui hippomene duc. Que ardor pia media\nde possidet ulterius calidus pennae, frustra curis mihi terrae venit dextera?"}],y=[{id:10011,projectId:"101dalmations",name:"101 Dalsss",date:new Date,latitude:51.50236196150672,longitude:-.1372241323820363,relevance:0,description:"101 Dalmations was filmed somewhere here",impactRange:"location",imageUrl:"https://placekitten.com/300/300"},{id:10101,name:"201 Dalsss???",projectId:"101dalmations",date:new Date,latitude:51.535155002420964,longitude:-.04049294793464195,relevance:0,description:"101 Dalmations was also filmed somewhere here",impactRange:"location",imageUrl:"https://placekitten.com/400/300"},{id:2201010,name:"Filthy water everywhere!",projectId:"ismywaterdirty",date:new Date,latitude:51.494600633637354,longitude:.5534795285052225,relevance:0,description:"checking if this is dirty",impactRange:"state",imageUrl:"https://placekitten.com/400/500"},{id:201334,name:"Gosh it cant be filthy here too!",projectId:"ismywaterdirty",date:new Date,latitude:52.60991649105231,longitude:5.27352955440632,relevance:0,description:"still checking if this is dirty",impactRange:"country",imageUrl:"https://placekitten.com/400/400"},{id:102314,name:"I like bugs",projectId:"bugburgers",date:new Date,latitude:24.238294578468107,longitude:106.5344972908355,relevance:0,description:"bringing bug burgers to Asia",impactRange:"continent",imageUrl:"https://placekitten.com/300/300"},{id:11303012,name:"Cockroaches are especially yummy",projectId:"bugburgers",date:new Date,latitude:8.788828652868984,longitude:19.69856197477612,relevance:0,description:"bringing bug burgers to Africa",impactRange:"continent",imageUrl:"https://placekitten.com/400/300"}];function x(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}s().accessToken="pk.eyJ1IjoiYW1hdGFoYWNrc25qYW1zIiwiYSI6ImNsMHAzNWdkdDFnOHQzZHBlMmx0Mml6a3IifQ.aKW4wLfYZuEPgoisxwRjdw";var j="countries-layer",w="anchors-layer",q="countries",k="anchors",I=d.createContext({view:{zoom:1,loading:!0},projectAnchorsResult:{loading:!0},setProjectAnchorsQuery:function(){}});var N=function(e){var t=e.children,n=e.className,a=e.onClickAnchor,u=(0,l.NB)(),m=u.width,f=u.height,v=u.ref,N=(0,d.useRef)(null),P=(0,d.useRef)(a),E=((0,d.useRef)(null),(0,d.useState)([-.1440787,51.501364])),O=E[0],S=E[1],C=(0,d.useState)(1),D=C[0],R=C[1],A=(0,d.useState)({}),L=A[0],_=A[1],F=(0,d.useState)(!0),M=F[0],z=F[1],T=(0,i.useRouter)(),U=function(e){e.date;var t=e.search,n=e.tags,r=(e.zoom,(0,d.useState)({loading:!0})),a=r[0],i=r[1],o=d.useRef();return(0,d.useEffect)((function(){o.current&&clearTimeout(o.current),console.log("DO SOMETHING HERE",o.current,t,n),o.current=setTimeout(h(p().mark((function e(){var t,r;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=y,n&&(t=t.filter((function(e){var t,r=(t=e.projectId,b.find((function(e){return e.id===t})));return null===r||void 0===r?void 0:r.tags.some((function(e){return n.includes(e)}))}))),r={type:"FeatureCollection",features:t.map((function(e){return{id:e.id,type:"Feature",properties:g({},e,{relevance:10}),geometry:{type:"Point",coordinates:[e.longitude,e.latitude]}}}))},o.current=null,i({data:r,loading:!1});case 5:case"end":return e.stop()}}),e)}))),1e3)}),[o,t,n]),(0,d.useEffect)((function(){i({loading:!0})}),[t,n]),a}(L);(0,d.useEffect)((function(){if(v.current&&!N.current){var e=new o.Map({container:v.current,style:"mapbox://styles/amatahacksnjams/cl0p3l629000d15s8e4ekv0uj",center:O,zoom:D,minZoom:0});e.on("move",(function(){var t=e.getCenter().lat,n=e.getCenter().lng;S([n,t]),R(e.getZoom())})),N.current=e,e.on("load",(function(){var t=function(e){return!e.originalEvent.cancelBubble&&(e.originalEvent.cancelBubble=!0,e.originalEvent.preventDefault(),!0)};e.addSource(q,{type:"geojson",data:"https://raw.githubusercontent.com/holtzy/D3-graph-gallery/master/DATA/world.geojson"}),e.addLayer({id:j,type:"fill",source:q,paint:{"fill-color":"rgba(200, 100, 240, 0.4)","fill-color-transition":{delay:1e3,duration:3e3},"fill-outline-color":"rgba(200, 100, 240, 1)"}});var n="iconimg",r=200;e.addImage(n,{width:r,height:r,data:new Uint8ClampedArray(16e4),onAdd:function(){var e=document.createElement("canvas");e.width=r,e.height=r,this.context=e.getContext("2d")},render:function(){var t=performance.now()%1e3/1e3,n=70*t+30,r=this.context;return r.clearRect(0,0,this.width,this.height),r.beginPath(),r.arc(this.width/2,this.height/2,n,0,2*Math.PI),r.fillStyle="rgba(255, 200, 200, ".concat(1-t,")"),r.fill(),r.beginPath(),r.arc(this.width/2,this.height/2,30,0,2*Math.PI),r.fillStyle="rgba(255, 100, 100, 1)",r.strokeStyle="white",r.lineWidth=2+4*(1-t),r.fill(),r.stroke(),this.data=r.getImageData(0,0,this.width,this.height).data,e.triggerRepaint(),!0}},{pixelRatio:2}),e.addSource(k,{type:"geojson",data:{type:"FeatureCollection",features:[]}}),e.addLayer({id:w,type:"symbol",source:k,layout:{"icon-image":n}}),e.on("click",w,(function(e){t(e)&&P.current&&P.current(e.features[0].properties)})),e.on("click",j,(function(n){t(n)&&function(e,t){var n=t.geometry,r=null;switch(n.type){case"MultiPolygon":var a=n.coordinates,i=a[0][0];r=new(s().LngLatBounds)(i[0],i[0]);var o=!0,u=!1,c=void 0;try{for(var l,d=a[Symbol.iterator]();!(o=(l=d.next()).done);o=!0){var m=l.value,p=!0,f=!1,h=void 0;try{for(var v,g=m[Symbol.iterator]();!(p=(v=g.next()).done);p=!0){var b=v.value,y=!0,x=!1,j=void 0;try{for(var w,q=b[Symbol.iterator]();!(y=(w=q.next()).done);y=!0){var k=w.value;r.extend(k)}}catch(G){x=!0,j=G}finally{try{y||null==q.return||q.return()}finally{if(x)throw j}}}}catch(G){f=!0,h=G}finally{try{p||null==g.return||g.return()}finally{if(f)throw h}}}}catch(G){u=!0,c=G}finally{try{o||null==d.return||d.return()}finally{if(u)throw c}}break;case"Polygon":var I=n.coordinates,N=I[0];r=new(s().LngLatBounds)(N[0],N[0]);var P=!0,E=!1,O=void 0;try{for(var S,C=I[Symbol.iterator]();!(P=(S=C.next()).done);P=!0){var D=S.value,R=!0,A=!1,L=void 0;try{for(var _,F=D[Symbol.iterator]();!(R=(_=F.next()).done);R=!0){var M=_.value;r.extend(M)}}catch(G){A=!0,L=G}finally{try{R||null==F.return||F.return()}finally{if(A)throw L}}}}catch(G){E=!0,O=G}finally{try{P||null==C.return||C.return()}finally{if(E)throw O}}break;default:var z=n.coordinates;r=new(s().LngLatBounds)(z[0],z[0]);var T=!0,U=!1,H=void 0;try{for(var B,Q=z[Symbol.iterator]();!(T=(B=Q.next()).done);T=!0){var W=B.value;r.extend(W)}}catch(G){U=!0,H=G}finally{try{T||null==Q.return||Q.return()}finally{if(U)throw H}}}e.fitBounds(r,{padding:5})}(e,n.features[0])})),e.on("mouseenter",j,(function(){e.getCanvas().style.cursor="pointer"})),e.on("mouseleave",j,(function(){e.getCanvas().style.cursor=""})),e.on("mouseenter",w,(function(t){e.getCanvas().style.cursor="pointer"})),z(!1)}))}}),[v.current]),(0,d.useEffect)((function(){if(T.query.lat&&T.query.lng&&T.query.zoom){var e,t,n=T.query,r=n.lat,a=n.lng,i=n.zoom,o=x(n,["lat","lng","zoom"]);console.log("GOT",r,a,i),null===(e=N.current)||void 0===e||e.setCenter([parseFloat(a),parseFloat(r)]),null===(t=N.current)||void 0===t||t.setZoom(parseFloat(i)),T.replace({query:o})}}),[T]),(0,d.useEffect)((function(){N.current&&N.current.resize()}),[m,f,N]),(0,d.useEffect)((function(){if(N.current){var e=U.data;if(e){var t=N.current.getSource(k);t&&t.setData(e)}}}),[N,U.data]);var H=(0,d.useMemo)((function(){return{view:{zoom:D,loading:M},projectAnchorsResult:U,setProjectAnchorsQuery:_}}),[M,D,U]);return(0,r.jsx)("div",{ref:v,className:c()(n,"relative"),children:(0,r.jsx)(I.Provider,{value:H,children:t})})};var P=function(){var e=(0,d.useContext)(I).view;if(e.loading||e.zoom>2.3)return null;var t=Math.min(1,(2.3-e.zoom)/.7);return(0,r.jsx)("div",{className:"absolute top-0 left-0 bottom-0 right-0 bg-slate-800 pointer-events-none z-10",style:{opacity:t}})},E=n(1212),O=function(e){var t=e.isOpen,n=e.onClose,a=(0,d.useRef)(n);return(0,d.useEffect)((function(){var e=function(e){if("Escape"===e.key)return e.stopPropagation(),a.current(),!1};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}),[]),(0,d.useEffect)((function(){a.current=n}),[n]),(0,r.jsx)("div",{className:c()("fixed top-0 bottom-0 left-0 right-0 transition-opacity duration-300 bg-slate-800 z-20 flex flex-col justify-center items-center",{"opacity-0 pointer-events-none":!t,"opacity-90 pointer-events-auto":t}),onClick:function(){return n()},children:(0,r.jsx)("div",{className:"w-xl",children:(0,r.jsx)("h1",{children:"TODO: Login"})})})};function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(){return C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C.apply(this,arguments)}var D=function(e){var t=C({},e),n=(0,d.useState)(!1),a=n[0],i=n[1],o=(0,E.aC)(),s=o.user,u=o.loading;return(0,r.jsxs)("nav",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){S(e,t,n[t])}))}return e}({},t,{className:c()("text-slate-300"),children:[(0,r.jsx)("div",{className:c()("absolute top-0 right-0 transition bg-slate-800 py-1 px-3 z-20 shadow-md shadow-cyan-600 rounded-bl-lg",{"opacity-0 translate-x-full":u}),children:s?(0,r.jsx)("span",{className:"text-xs uppercase",children:s.email}):(0,r.jsx)("button",{className:"font-mono lowercase hover:underline underline-offset-2",onClick:function(){return i(!0)},children:"Login"})}),(0,r.jsx)(O,{isOpen:a,onClose:function(){return i(!1)}})]}))};function R(e){switch(e){case"technology":case"artificial intelligence":case"augmented reality":return"technology";case"health":case"medicine":case"well-being":case"spirituality":case"exercise":return"health";case"environment":case"pollution":case"water-pollution":case"air-pollution":case"deforestation":case"endangered-species":return"environment";case"society":case"culture":case"history":case"poverty":case"obesity":return"society";case"charity":case"humanitarian":case"disaster-relief":case"humanitarian-aid":return"humanitarian"}}function A(e){var t=2.1;switch(e.impactRange){case"location":t=15;break;case"neighbourhood":t=12;break;case"state":t=9.8;break;case"country":t=7;break;case"continent":t=4}return{lat:e.latitude,lng:e.longitude,zoom:t}}var L=n(9655),_=n(750),F=n.n(_),M=function(){return(0,r.jsxs)("div",{className:c()(F()["lds-grid"]),children:[(0,r.jsx)("div",{}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{})]})},z=n(1664);function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var H=function(e){var t=e.className,n=e.anchorId,a=e.projectId,o=e.onClose,s=U(e,["className","anchorId","projectId","onClose"]),u=function(e,t){var n=(0,d.useState)({loading:!0}),r=n[0],a=n[1],i=d.useRef();return(0,d.useEffect)((function(){i.current&&clearTimeout(i.current),e?i.current=setTimeout(h(p().mark((function n(){var r,i,o;return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=b.find((function(t){return t.id===e})),i=y.filter((function(t){return t.projectId===e})),o=t?i.find((function(e){return e.id===t})):void 0,a({data:{project:r,anchors:i,anchor:o},loading:!1});case 4:case"end":return n.stop()}}),n)}))),1e3):a({loading:!1})}),[i,t,e]),(0,d.useEffect)((function(){a({loading:!0})}),[e,t]),r}(a,n),l=u.data,m=u.loading,f=(0,d.useRef)(o),v=(0,d.useRef)(a),g=(0,i.useRouter)();(0,d.useEffect)((function(){var e=function(e){if(v.current&&"Escape"===e.key)return console.log("CLOSE HERE"),f.current(),e.preventDefault(),!1};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}),[]),(0,d.useEffect)((function(){f.current=o}),[o]),(0,d.useEffect)((function(){v.current=a}),[a]);var x=null===l||void 0===l?void 0:l.project.tags[0],j=function(e){switch(R(e)){case"environment":return"text-green-500";case"health":return"text-pink-500";case"humanitarian":return"text-red-500";case"society":return"text-teal-500";case"technology":return"text-sky-500";default:return"text-slate-500"}}(x),w=function(e){switch(R(e)){case"environment":return"bg-green-500";case"health":return"bg-pink-500";case"humanitarian":return"bg-red-500";case"society":return"bg-teal-500";case"technology":return"bg-sky-500";default:return"bg-slate-500"}}(x);return(0,r.jsx)("section",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){T(e,t,n[t])}))}return e}({className:c()("bg-slate-800 flex flex-col items-center p-4 transition-opacity duration-500 overflow-y-auto text-slate-300",t,{"opacity-0 pointer-events-none":!a,"opacity-100":a,"justify-center":m})},s,{children:m?(0,r.jsx)(M,{className:"flex-1"}):l?(0,r.jsxs)("div",{className:"flex flex-col w-full max-w-3xl",children:[(0,r.jsxs)("div",{className:"flex flex-row justify-between items-center",children:[l.project.forkedFromProjectId?(0,r.jsxs)("span",{children:[(0,r.jsx)("span",{children:"this is a fork, "}),(0,r.jsx)(z.default,{href:{pathname:"/projects/[projectId]",query:{projectId:l.project.forkedFromProjectId}},children:(0,r.jsx)("a",{className:c()("underline underline-offset-2",j),children:"check out the original"})})]}):(0,r.jsx)("span",{children:"root project"}),(0,r.jsx)("button",{className:"text-xs",onClick:o,children:"ESC"})]}),(0,r.jsx)("div",{className:c()("w-full h-1 my-4",w)}),(0,r.jsx)("div",{className:"flex-none w-full h-96 bg-no-repeat bg-origin-border bg-center bg-cover my-4",style:{backgroundImage:"url(".concat(l.project.imageUrls[0],")")}}),(0,r.jsx)("div",{className:c()("w-full h-1 mb-4",w)}),(0,r.jsx)("h1",{className:c()("text-3xl mb-6 text-white"),children:l.project.name}),(0,r.jsx)("ul",{className:"flex flex-row flex-wrap",children:l.project.tags.map((function(e){return(0,r.jsx)("li",{className:c()("mr-4 mb-2 underline underline-offset-2",j),children:e},e)}))}),l.project.proposedSolution?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("span",{className:"uppercase text-xs",children:l.project.proposedSolution.status})}):(0,r.jsxs)("div",{className:"mt-2",children:["This problem has no solution yet, be the first to"," ",(0,r.jsx)(z.default,{href:{pathname:"/projects/[projectid]/fork",query:{projectId:l.project.id}},children:(0,r.jsx)("a",{className:c()("underline underline-offset-2",j),children:"propose one"})})]}),(0,r.jsx)("div",{className:c()("w-full h-1 my-4",w)}),(0,r.jsx)("section",{className:"contents-markdown",children:(0,r.jsx)(L.D,{children:l.project.contents})}),(0,r.jsx)("div",{className:c()("w-full h-1 my-4",w)}),(0,r.jsx)("h2",{className:"uppercase text-2xl mb-6",children:"Where"}),(0,r.jsx)("div",{className:c()("w-full h-0.5 my-4",w)}),l.anchors.map((function(e){return(0,r.jsxs)("div",{children:[e.imageUrl?(0,r.jsx)("img",{src:e.imageUrl,alt:e.name,className:"m-auto max-w-full"}):null,(0,r.jsx)("h3",{className:"text-xl mb-2",children:e.name}),(0,r.jsxs)("span",{children:["affects a"," ",(0,r.jsx)("code",{className:"uppercase text-sm",children:e.impactRange})," ","around"," "]}),(0,r.jsx)("button",{className:"underline underline-offset-2",onClick:function(){g.push({pathname:"/",query:A(e)},void 0,{shallow:!0})},children:(0,r.jsxs)("code",{children:[e.latitude.toFixed(6),", ",e.longitude.toFixed(6)]})}),(0,r.jsx)("section",{children:(0,r.jsx)(L.D,{children:e.description})}),(0,r.jsx)("div",{className:c()("w-full h-0.5 my-4",w)})]},e.id)}))]}):null}))},B=n(6486),Q=n.n(B);function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var G=function(e){var t=e.match,n=e.children,a=e.matchClassName,i=void 0===a?"font-bold underline underline-offset-2":a,o=new RegExp(t||"","ig"),s=n.match(o),u=t&&s?Q().flatten(Q().zip(n.split(o).map((function(e){return{text:e,match:!1}})),s.map((function(e){return{text:e,match:!0}})))).filter((function(e){return e})):[{text:n,match:!1}];return(0,r.jsx)(r.Fragment,{children:u.map((function(e,t){var n=e.text,a=e.match;return(0,r.jsx)("span",{className:c()(W({},i,a)),children:n},t)}))})},Y=function(e){var t,n=e.className,a=e.onSelectProject,i=(0,d.useRef)(null),o=(0,d.useState)(!1),s=o[0],u=o[1],l=(0,d.useRef)(s),m=(0,d.useState)(""),f=m[0],v=m[1],g=(0,d.useState)(),y=g[0],x=g[1],j=function(e){var t=e.skip,n=e.search,r=(0,d.useState)({loading:!0}),a=r[0],i=r[1],o=d.useRef();return(0,d.useEffect)((function(){o.current&&clearTimeout(o.current),t?i({loading:!1}):o.current=setTimeout(h(p().mark((function e(){var t,r;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=b,n&&(r=n.toLowerCase(),t=t.filter((function(e){return e.name.toLowerCase().includes(r)||e.tags.some((function(e){return e.includes(r)}))}))),i({data:t,loading:!1});case 3:case"end":return e.stop()}}),e)}))),1e3)}),[o,n,t]),(0,d.useEffect)((function(){i({loading:!0})}),[n]),a}({skip:!s,search:f}),w=j.data,q=j.loading;return(0,d.useEffect)((function(){var e=function(e){var t;return"/"!==e.key||l.current?"Escape"===e.key?(e.preventDefault(),u(!1),!1):void 0:(e.preventDefault(),u(!0),null===(t=i.current)||void 0===t||t.focus(),!1)};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}),[]),(0,d.useEffect)((function(){var e;(l.current=s,s)||(x(void 0),null===(e=i.current)||void 0===e||e.blur(),v(""))}),[s]),(0,d.useEffect)((function(){x(void 0)}),[f]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:c()("fixed top-0 bottom-0 left-0 right-0 transition-opacity duration-300 bg-slate-800 z-30",{"opacity-0 pointer-events-none":!s,"opacity-90 pointer-events-auto":s}),onClick:function(){return u(!1)}}),(0,r.jsxs)("div",{className:c()("transition duration-300 flex flex-col",(t={},W(t,n||"",!s),W(t,"w-72",!s),W(t,"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 h-screen w-full max-w-lg py-14 z-40",s),t)),children:[(0,r.jsx)("input",{ref:i,type:"text",value:f,placeholder:"Quick search...",className:c()("py-2 px-4 rounded-full w-full"),onKeyDown:function(e){switch(e.key){case"ArrowDown":if(!w||w.length<0)break;var t=y?null===w||void 0===w?void 0:w.findIndex((function(e){return e.id===y.id})):void 0,n=Number.isFinite(t)?(t+1)%w.length:0;w[n]&&x(w[n]);break;case"ArrowUp":if(!w||w.length<0)break;var r=(y&&(null===w||void 0===w?void 0:w.findIndex((function(e){return e.id===y.id})))||w.length)-1;w[r]&&x(w[r]);break;case"Enter":if(y)return u(!1),a(y.id),e.stopPropagation(),e.preventDefault(),!1;break;case"Escape":return u(!1),e.stopPropagation(),e.preventDefault(),!1}return!1},onFocus:function(){return u(!0)},onChange:function(e){return v(e.target.value)}}),(0,r.jsx)("ul",{className:c()("flex-1 flex flex-col w-full",{hidden:!s,"py-8":s}),children:q?(0,r.jsx)("li",{className:"flex-1 w-full p-4 flex flex-col justify-center items-center",children:(0,r.jsx)(M,{})}):(s&&w||[]).map((function(e){return(0,r.jsx)("li",{className:c()("w-full p-4 rounded-lg mb-2",(null===y||void 0===y?void 0:y.id)&&y.id===e.id?"bg-blue-400":"bg-slate-100"),children:(0,r.jsx)(z.default,{href:{pathname:"/projects/[projectId]",query:{projectId:e.id}},children:(0,r.jsx)("a",{onClick:function(){return u(!1)},className:"hover:underline underline-offset-2",children:(0,r.jsx)(G,{match:f,children:e.name})})})},e.id)}))})]})]})},Z=function(){var e=(0,i.useRouter)(),t=e.query.anchorId?parseInt(e.query.anchorId,10):void 0,n=e.query.projectId||"";return(0,r.jsxs)("div",{className:"h-screen w-screen overflow-hidden",children:[(0,r.jsxs)(a.default,{children:[(0,r.jsx)("title",{children:"Explore a World of Problems"}),(0,r.jsx)("meta",{name:"description",content:"Explore a world of problems"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,r.jsxs)("main",{className:"h-full w-full relative",children:[(0,r.jsx)(D,{}),(0,r.jsx)(N,{onClickAnchor:function(t){return e.push({pathname:"/projects/[projectId]/anchors/[anchorId]",query:{projectId:t.projectId,anchorId:t.id}})},className:"w-full h-full m-0 ",children:(0,r.jsx)(P,{})}),(0,r.jsx)(Y,{className:"absolute top-8 left-1/2 -translate-x-1/2 -translate-y-1/2 z-10",onSelectProject:function(t){t?e.push({pathname:"/projects/[projectId]",query:{projectId:t}}):e.push("/")}}),(0,r.jsx)(H,{anchorId:t,projectId:n,className:"absolute top-0 left-1/2 -translate-x-1/2 w-full h-screen z-20",onClose:function(){return e.push("/")}})]}),(0,r.jsx)("footer",{})]})}},750:function(e){e.exports={"lds-grid":"Loading_lds-grid__SaxQv"}}}]);